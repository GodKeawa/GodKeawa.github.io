---
title: 如何让微软输入法输出时间戳
draft: false
date: 2024-04-07T14:28:04+08:00
lastmod: 2024-04-07T14:28:04+08:00
categories: [tech]
tags: [timestamp]
description: 如何正确地让微软输入法输出时间戳
---
输出时间戳是个好东西，但是非常多输入法都不提供自定义方法，如果提供多半就是十分阴间的大输入法

于是就去研究了一下微软输入法输出时间的方法，然后发现几乎都是无效的

特性上微软输入法确实会对`%yyyy%`这种宏进行处理，但是阴间就阴间在win11以后，这种宏直接就提前转换了

网上大部分教程都是直接设置自定义短语，然后使用
`%yyyy%-%MM%-%dd% %HH%:%mm%:%ss%`
然而实际上这样的短语定义根本就不是动态的，在输入这个短语后再次查看，就会发现短语已经被转译了
也就是说之后每次输出都是固定的时间

这时候聪明人就会想了，那既然输入的时候会转译一次，那我再套一层不就行了
于是输入自定义短语
`%%yyyy%%-%%MM%%-%%dd%% %%HH%%:%%mm%%:%%ss%%`
打开一看，果然被消掉了一层，现在框里显示的是
`%yyyy%-%MM%-%dd% %HH%:%mm%:%ss%`
这下总没有问题了吧

然后去输入，发现阴间输入法又不转译了，直接输出了
`%yyyy%-%MM%-%dd% %HH%:%mm%:%ss%`
真是服了

之后去研究了一下微软输入法的特性，发现每次保存任意短语都会导致整个表被刷新转译一次
也就是说每次保存像`%yyyy%`这样的宏都会少一层

最后的解决方案竟然是
先输入`%%yyyy%%-%%MM%%-%%dd%% %%HH%%:%%mm%%:%%ss%%`但是选择2号（或者其他位置）
然后再打开，修改成一号位置，保存
然后就能正常使用了，虽然这时候时间定格在了保存的时间，但实际上输出的时间却应用了宏

简直是？？？
并且每次修改自定义表的任何东西都要重设一次，简直蛋疼

不说了，直接安装quicker
